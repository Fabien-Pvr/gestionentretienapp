import { useEffect, useState } from "react";
import { onValue, ref } from "firebase/database";
import { db } from "../../Services/Firebase.js";

function useGetExploitationData(NomExploitation) {
  const [exploitationInfo, setExploitationInfo] = useState(null);
  console.log("testIdBesoin", NomExploitation);
  console.log("testIdBesoin2", NomExploitation);

  useEffect(() => {
    const exploitationRef = ref(db, `Exploitation/${NomExploitation}`);

    const unsubscribe = onValue(exploitationRef, (snapshot) => {
      const data = snapshot.val();
      if (data) {
        setExploitationInfo(data);
        console.log("dataExploitation", data);
      }
    });

    return () => unsubscribe();
  }, [NomExploitation]);

  console.log("besoinEntretienInfo", exploitationInfo);

  return { exploitationInfo };
}

export default useGetExploitationData;
